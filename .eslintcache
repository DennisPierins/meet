[{"/mnt/c/Users/denni/Documents/GitHub/meet/src/index.js":"1","/mnt/c/Users/denni/Documents/GitHub/meet/src/App.js":"2","/mnt/c/Users/denni/Documents/GitHub/meet/src/reportWebVitals.js":"3","/mnt/c/Users/denni/Documents/GitHub/meet/src/CitySearch.js":"4","/mnt/c/Users/denni/Documents/GitHub/meet/src/NumberOfEvents.js":"5","/mnt/c/Users/denni/Documents/GitHub/meet/src/EventList.js":"6","/mnt/c/Users/denni/Documents/GitHub/meet/src/api.js":"7","/mnt/c/Users/denni/Documents/GitHub/meet/src/Event.js":"8","/mnt/c/Users/denni/Documents/GitHub/meet/src/mock-data.js":"9","/mnt/c/Users/denni/Documents/GitHub/meet/src/Alert.js":"10","/mnt/c/Users/denni/Documents/GitHub/meet/src/serviceWorker.js":"11"},{"size":398,"mtime":1610891237132,"results":"12","hashOfConfig":"13"},{"size":1952,"mtime":1610634998431,"results":"14","hashOfConfig":"13"},{"size":362,"mtime":1608214062624,"results":"15","hashOfConfig":"16"},{"size":2305,"mtime":1610635381331,"results":"17","hashOfConfig":"13"},{"size":1117,"mtime":1610635563342,"results":"18","hashOfConfig":"13"},{"size":393,"mtime":1609160274103,"results":"19","hashOfConfig":"13"},{"size":3241,"mtime":1609768678261,"results":"20","hashOfConfig":"13"},{"size":1311,"mtime":1610205896238,"results":"21","hashOfConfig":"13"},{"size":3142,"mtime":1609167614382,"results":"22","hashOfConfig":"13"},{"size":658,"mtime":1610634291965,"results":"23","hashOfConfig":"13"},{"size":5221,"mtime":1610890480939,"results":"24","hashOfConfig":"13"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},"1ow1o02",{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"ms066l",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"27"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},"/mnt/c/Users/denni/Documents/GitHub/meet/src/index.js",[],["51","52"],"/mnt/c/Users/denni/Documents/GitHub/meet/src/App.js",[],"/mnt/c/Users/denni/Documents/GitHub/meet/src/reportWebVitals.js",[],["53","54"],"/mnt/c/Users/denni/Documents/GitHub/meet/src/CitySearch.js",[],"/mnt/c/Users/denni/Documents/GitHub/meet/src/NumberOfEvents.js",[],"/mnt/c/Users/denni/Documents/GitHub/meet/src/EventList.js",[],"/mnt/c/Users/denni/Documents/GitHub/meet/src/api.js",["55","56"],"import { mockData } from './mock-data';\r\nimport axios from 'axios';\r\nimport NProgress from 'nprogress';\r\n\r\n// This function takes an events array, then uses map to create a new array with only locations.\r\n// It will also remove all duplicates by creating another new array using the spread operator and spreading a Set.\r\n// The Set will remove all duplicates from the array.\r\n\r\nexport const extractLocations = (events) => {\r\n  var extractLocations = events.map((event) => event.location);\r\n  var locations = [...new Set(extractLocations)];\r\n  return locations;\r\n};\r\n\r\nexport const extractEvents = (events) => {\r\n  var extractEvents = events.map((event) => event);\r\n  var oneEvent = [...new Set(extractEvents)];\r\n  return oneEvent;\r\n};\r\n\r\nconst checkToken = async (accessToken) => {\r\n  const result = await fetch(\r\n    `https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${accessToken}`\r\n  )\r\n    .then((res) => res.json())\r\n    .catch((error) => error.json());\r\n\r\n  return result;\r\n};\r\n\r\nexport const getEvents = async () => {\r\n  NProgress.start();\r\n\r\n  if (window.location.href.startsWith(\"http://localhost\")) {\r\n    NProgress.done();\r\n    return mockData;\r\n  }\r\n\r\n\r\n  const token = await getAccessToken();\r\n\r\n  if (token) {\r\n    removeQuery();\r\n    const url = 'https://j0uvphcgcg.execute-api.us-east-1.amazonaws.com/dev/api/get-events' + '/' + token;\r\n    const result = await axios.get(url);\r\n    if (result.data) {\r\n      var locations = extractLocations(result.data.events);\r\n      localStorage.setItem(\"lastEvents\", JSON.stringify(result.data));\r\n      localStorage.setItem(\"locations\", JSON.stringify(locations));\r\n    }\r\n    NProgress.done();\r\n    return result.data.events;\r\n  }\r\n};\r\n\r\nexport const getAccessToken = async () => {\r\n  const accessToken = localStorage.getItem('access_token');\r\n  const tokenCheck = accessToken && (await checkToken(accessToken));\r\n\r\n  if (!accessToken || tokenCheck.error) {\r\n    await localStorage.removeItem(\"access_token\");\r\n    const searchParams = new URLSearchParams(window.location.search);\r\n    const code = await searchParams.get(\"code\");\r\n    if (!code) {\r\n      const results = await axios.get(\r\n        \"https://j0uvphcgcg.execute-api.us-east-1.amazonaws.com/dev/api/get-auth-url\"\r\n      );\r\n      const { authUrl } = results.data;\r\n      return (window.location.href = authUrl);\r\n    }\r\n    return code && getToken(code);\r\n  }\r\n  return accessToken;\r\n};\r\n\r\nconst removeQuery = () => {\r\n  if (window.history.pushState && window.location.pathname) {\r\n    var newurl =\r\n      window.location.protocol +\r\n      \"//\" +\r\n      window.location.host +\r\n      window.location.pathname;\r\n    window.history.pushState(\"\", \"\", newurl);\r\n  } else {\r\n    newurl = window.location.protocol + \"//\" + window.location.host;\r\n    window.history.pushState(\"\", \"\", newurl);\r\n  }\r\n};\r\n\r\nconst getToken = async (code) => {\r\n  const encodeCode = encodeURIComponent(code);\r\n  const { access_token } = await fetch(\r\n    'https://j0uvphcgcg.execute-api.us-east-1.amazonaws.com/dev/api/token' + '/' + encodeCode\r\n  )\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((error) => error);\r\n\r\n  access_token && localStorage.setItem(\"access_token\", access_token);\r\n\r\n  return access_token;\r\n};","/mnt/c/Users/denni/Documents/GitHub/meet/src/Event.js",[],"/mnt/c/Users/denni/Documents/GitHub/meet/src/mock-data.js",[],"/mnt/c/Users/denni/Documents/GitHub/meet/src/Alert.js",[],["57","58"],"/mnt/c/Users/denni/Documents/GitHub/meet/src/serviceWorker.js",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"59","replacedBy":"63"},{"ruleId":"61","replacedBy":"64"},{"ruleId":"65","severity":1,"message":"66","line":44,"column":93,"nodeType":"67","messageId":"68","endLine":44,"endColumn":94},{"ruleId":"65","severity":1,"message":"66","line":93,"column":76,"nodeType":"67","messageId":"68","endLine":93,"endColumn":77},{"ruleId":"59","replacedBy":"69"},{"ruleId":"61","replacedBy":"70"},"no-native-reassign",["71"],"no-negated-in-lhs",["72"],["71"],["72"],"no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat",["71"],["72"],"no-global-assign","no-unsafe-negation"]